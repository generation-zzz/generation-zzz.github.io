#!/usr/bin/env ruby

require 'date'

start_date = Date.iso8601("2022-06-03")
episodes = [
  "Lu and Mark interview Kellie and Matilda and also ... themselves.",
  "Lu and Mark interview Rene and Zia and then Jules and Sandy.",
  "No interviews this week - just Lu and Mark playing all the hits.",
  "Our first three generation interview! Lu, Mark, Vic and Leonie interview Susanna, Mischa and Cristina.",
  "No interviews this week so Lu and Mark play all the hits and start getting excited about Sonic Masala festival.",
  "Lu and Mark continue to be excited about Sonic Masala and also have a lovely chat with Kristin from Heyday and The Double Happiness.",
  "Lu and Mark interview Yance and Alex.",
  "Lu and Mark interview Izzy and Terese.",
  "No interview this week so Lu and Mark play all their new and old favourites.",
  "That's double digits friends. This week Lu and Mark interview Lyric who is an independent artist from the Gold Coast and we play her latest track 1985.",
  "Radiothon edition part 2! Lu and Mark chat with Ruby and Mark.",
  "Dozens of episodes! dozens! Lu and Mark chat with Sonny, Ava and Poppy.",
  "Lu and Mark interview Kat (aka Lack the Low).",

  "Part one of a two part interview - Lu and Mark chat with Tim, Matilda and Isobel.",
  "Part two of our two part interview with Tim, Matilda and Isobel.",
  "No interviews this week so Lu and Mark play some new releases, get excited about grainzine.com five year birthday and other upcoming gigs.",
  "No interviews this week so Lu and Mark play the music they're listening to at the moment.",
  "Lu and Mark celebrate the 30th birthday of Queer Radio by having a delightful chat with Blair Martin.",
  "Lu and Mark chat with Kai and Melissa from Girl and Girl.",
  "Lu and Mark play some tunes and introduce a new exciting new segment.",
  "No interview this week so Lu and Mark chat and play some zecret zongs.",
  "Lu and Mark chat with local musician and radio show host Wendy Lang.",
  "Lu and Mark chat with Ez and Cai from tranzmission.",
  "Lu and Mark play some tunes and reveal their zecret zongs.",
  "It's transgender awareness week so Lu and Mark play songs celebrating the trans community.",
  "That's our first six months of the show completed! This week Lu and Mark interview Noel (from The Trams) and Ollie (OJ Mengel) and Ollie performs his song Last Page live.",

  "Lu and Mark chew the fat and play the songs of today.",
  "Lu and Mark chat with the wonderful Anna O'Bryan.",
  "Lu and Mark chat with 01.ekka and Stepkid.",
  "Lu and Mark chat with dumaresq on the day of the release of No Alarms In Our Curated Worlds.",
  "No interview this week, just Lu and Mark doing a hot100 retrospective - sampling a variety of #1s through the decades.",
  "Lu's personal favourites from this show and various fill-ins on 4ZZZ programs from last year.",
  "Lu and Mark chat with Sally Seltmann and her daughter Judy.",
  "Lu and Mark get excited about going to see Bikini Kill.",
  "In the wake of Invasion day, Lu and Mark share the sounds of First Nations musicians.",
  "Tonight, it's the Lu and Mark metal show - multigenerational head banging - sign of the cow and calf, etc",
  "Lu and Mark chat with Eric, a volunteer at Seattle public radio station KEXP",
  "Lu and Mark playing a whole lot of very new music released in the last few weeks.",
  "Lu and Mark chat with Lyric - an artist from the gold coast who was our guest in episode 10 - on the day of the release of her new song Outdated.",
  "This week to celebrate world pride, Lu and Mark play LGBTQIA+ artists from here and the rest of the world.",
  "Lu and Mark play music from upcoming tours and festivals",
  "This week Mark and Lu raid the hotbin and other sources for new releases to demonstrate how close our fingertips are to the pulse, the zeitgeist, etc of modern society",
  "This week Lu and Mark had a delightful chat with Meanjin artist MJ O'Neill",
  "The show this week is all about celebrating transgender and gender diverse musicians as it is transgender day of visibility.",
  "It's April Atonement so this week it made sense (to us at least) to play a goth music special with some classics of the genre and also more contemporary local artists",
  "Mudhoney is playing this weekend so this week we went back to the beginning of grunge and from there to contemporary local grunge influenced artists",
  "This week Lu and Mark chatted with Perth teen rockers Detour - it's the week of the release of their debut EP Say the Word.",
  "This week we raided the hotbin for some exciting new releases including the VOIID debut album which is released ... today!",
  "This week we play only first nations artists from here and around the country.",
  "This week we explore the tenuous genre that is \"the\" artists from around the world - artists so bold that they employ the (and not just a) definite article to characterise their work.",
  "This week Lu and Mark take a stroll down the road to Sonic Masala Fest 2023.",
  "It's our 52nd show! That's a whole12 months. This week the dynamic duo play music created by other duos.",
  "It is a new day and a new grid - this week, Lu and Mark explore the musical offerings of Japan.",
  "This week Lu and Mark chat to Pat Trash from Trash and the Treasures.",
  "This week it's Lu's birthday so we play a selection of his favourite metal artists.",
  "This week we raid the hotbin and play all new releases including Anna O'Bryan's new single which was released just today.",
  "Today is the last day of Pride Month so this week we celebrate the music of the LGBTQI+ community",
]

episodes.each_with_index do |episode, index|
  episode_number = index + 1
  season_number = (episode_number / 13) + 1
  date = start_date + (index * 7)
  base = "%03d" % episode_number
  folder = "e#{base}"
  `mkdir -p #{folder}`
  path = "#{folder}/index.html"
  puts "generating #{path} for #{date}"
  title = "Generation ZZZ - Season #{season_number} - Episode #{episode_number} - #{date}"
  File.open(path, "w") do |file|
    file.puts <<~HTML
      <!DOCTYPE html>
      <html lang="en-AU">
          <head>
              <script async src="https://www.googletagmanager.com/gtag/js?id=G-9T560F91PF"></script>
              <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
                gtag('config', 'G-9T560F91PF');
              </script>
              <meta charset="UTF-8">
              <meta content="dark" name="color-scheme">
              <meta name="viewport" content="width=device-width, initial-scale=1">
              <meta property="og:title" content="#{title}" />
              <meta property="og:description" content="#{episode}" />
              <title>#{title}</title>
              <link rel="preconnect" href="https://fonts.googleapis.com">
              <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
              <link href="https://fonts.googleapis.com/css2?family=Noto+Serif&family=Source+Sans+Pro:wght@400;700&display=swap" rel="stylesheet">
              <link rel="stylesheet" type="text/css" href="/styles.css">
          </head>
          <body>
              <h1><a href="/"><img style="clip-path: circle(); vertical-align: middle" height="50" src="/logo.jpeg" alt="Generation ZZZ Logo"></a> Season #{season_number} - Episode #{episode_number} - #{date}</h1>
              <p>#{episode}</p>
              <p><audio controls src="https://zeddigital.blob.core.windows.net/zed-digital/ZD-#{date}-19-00.mp3"></audio></p>
              <p><a href="https://4zzz.org.au/program/generation-zzz/#{date}%2019:00:00">Track Information</a></p>
          </body>
      </html>
    HTML
  end
end

episodes.each_slice(13).each_with_index do |season_episodes, season_index|
  season_number = season_index + 1
  base = "%03d" % season_number
  folder = "s#{base}"
  `mkdir -p #{folder}`
  path = "#{folder}/index.html"
  puts "generating #{path}"
  File.open(path, "w") do |file|
    file.puts <<~HTML
      <!DOCTYPE html>
      <html lang="en-AU">
          <head>
              <script async src="https://www.googletagmanager.com/gtag/js?id=G-9T560F91PF"></script>
              <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
                gtag('config', 'G-9T560F91PF');
              </script>
              <meta charset="UTF-8">
              <meta content="dark" name="color-scheme">
              <meta name="viewport" content="width=device-width, initial-scale=1">
              <meta property="og:title" content="Generation ZZZ Season #{season_number}" />
              <meta property="og:description" content="Weekly radio show on Meanjin community radio station 4ZZZ" />
              <title>Generation ZZZ Season #{season_number}</title>
              <link rel="preconnect" href="https://fonts.googleapis.com">
              <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
              <link href="https://fonts.googleapis.com/css2?family=Noto+Serif&family=Source+Sans+Pro:wght@400;700&display=swap" rel="stylesheet">
              <link rel="stylesheet" type="text/css" href="/styles.css">
          </head>
          <body>
              <h1><a href="/"><img style="clip-path: circle(); vertical-align: middle" height="50" src="/logo.jpeg" alt="Generation ZZZ Logo"></a> Season #{season_number}</h1>
              <section aria-title="Season #{season_number} Episodes">
    HTML

    season_episodes.to_enum.with_index.reverse_each do |episode, season_episode_index|
      episode_index = season_index * 13 + season_episode_index
      episode_number = episode_index + 1
      date = start_date + (episode_index * 7)
      file.puts <<~HTML
        <a href="/e#{"%03d" % episode_number}" style="text-decoration: none;">
          <article>
              <h2>Episode #{episode_number} - #{date}</h2>
              <p>#{episode}</p>
          </article>
        </a>
      HTML
    end

    file.puts <<~HTML
              </section>
          </body>
      </html>
    HTML
  end
end
